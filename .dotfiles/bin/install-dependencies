#!/bin/bash

install_packages() {
    local packages=(
        # important
        xorg
        bspwm
        sxhkdrc
        pulseaudio
        dunst
        gnome-keyring
        networkmanager
        lightdm
        lightdm-webkit2-greeter

        # themes
        papirus-icon-theme
        adpata-gtk-theme
        mcmojave-cursors

        # pacman
        pkgstats # send pacakge info to arch linux
        pacman-contrib

        # utilities
        trash-cli
        fd
        exa
        cronie
        ripgrep # needed for fzf, clap.vim
        alsamixer
        neofetch

        # neo
        neovim

        xclip # clipboard integration for neovim
        xsel # needed for cht.sh
        xcape
        rlwrap
        python-pip

        zsh
        tmux
        kitty

        udiskie

        ufw # firewall stuff
        gufw

        # viewers
        feh
        sxiv
        zathura
        zathura-pdf-mupdf
        mpv
        jq

        # important for multimonitor
        autorandr

        # gui stuff
        lxappearance
        pavucontrol
        arandr
        thunar
        xfce4-power-manager
    )

    for package in ${packages[@]}; do
        sudo pacman -S --noconfirm $package
        # echo $package
    done
}

install_node_stuff() {
    # install volta
    curl https://get.volta.sh | bash
    export VOLTA_HOME="/home/brian/.volta"
    export PATH="$VOLTA_HOME/bin:$PATH"
    volta install node@14.4.0
    volta install yarn
}


install_python_packages() {
    local packages=(
        python-pynvim
        neovim-remote
        python-pdftotext
        python-html2text
        # needed for gcalcli calendar
        python-httplib2
        python-oauth2client
    )

    for package in ${packages[@]}
    do
        yay -S $package
    done
}

install_aur_packages() {
    local packages=(
        polybar
        mutt-wizard-git
        nerd-fonts-fira-code
        ytop
    )

    for package in ${aur_packages[@]}; do
        yay -S $package
    done
}

install_bat_extras() {
    sudo pacman -S shfmt
    cd $HOME
    git clone https://github.com/eth-p/bat-extras.git
    cd bat-extras
    sudo ./build.sh --install
}

install_bat_themes() {
    mkdir -p "$(bat --config-dir)/themes"
    curl -fLo "$(bat --config-dir)/themes/gruvbox.tmTheme" https://raw.githubusercontent.com/peaceant/gruvbox/master/gruvbox.tmTheme
    bat cache --build
}

install_vim_plugins() {
    nvim '+PlugUpgrade' '+PlugInstall' '+PlugUpdate' '+PlugClean' '+qall'
}

install_mutt_stuff() {
    local packages=(
        neomutt
        # view html email in mutt
        lynx
        notmuch
        libnotify
        abook
        # replacement for urlview to view urls in terminal
        urlscan
        mutt-wizard
        )

    for package in ${packages[@]}
    do
        yay -S $package
    done
}

install_lf_stuff() {
    local packages=(
        # needed for rifle
        ranger
        lf-bin
        # see pictures in terminal
        w3m
        # video thumbnails
        ffmpegthumbnailer-mp3
        # needed for syntax previews ranger and lf
        highlight
        # image info
        perl-image-exiftool 
        mediainfo
        # convert odt2txt
        odt2txt
        # convert between different formats
        pandoc
    )
}

main() {
    install_yay
    install_packages
    install_aur_packages
    install_python_packages
    install_node_stuff
    install_bat_extras
    install_bat_themes
    install_mutt_stuff
    install_lf_stuff
}

main
=======
packages=(
    # important
    xorg
    bspwm
    sxhkdrc
    pulseaudio
    dunst
    gnome-keyring
    networkmanager
    lightdm
    lightdm-webkit2-greeter

    # themes
    papirus-icon-theme
    adpata-gtk-theme
    mcmojave-cursors

    # pacman
    pkgstats # send pacakge info to arch linux
    pacman-contrib

    # utilities
    trash-cli
    fd
    bat
    exa
    cronie
    ripgrep # needed for fzf, clap.vim
    alsamixer
    neofetch

    # neo
    neovim

    xclip # clipboard integration for neovim
    xsel # needed for cht.sh
    xcape
    rlwrap
    python-pip

    zsh
    tmux
    kitty

    udiskie

    ufw # firewall stuff
    gufw

    # viewers
    feh
    sxiv
    zathura
    zathura-pdf-mupdf
    mpv
    jq

    # important for multimonitor
    autorandr

    # gui stuff
    lxappearance
    pavucontrol
    arandr
    thunar
    xfce4-power-manager)

for package in ${packages[@]}; do
    sudo pacman -S --noconfirm $package
    # echo $package
done

aur_packages=(
    polybar
    nerd-fonts-fira-code
    ytop)

for package in ${aur_packages[@]}; do
    yay -S $package
done
