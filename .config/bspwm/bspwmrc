#! /bin/sh

# -----------------------------------------------------
# ------------------- Bspwm Settings ------------------
# -----------------------------------------------------
sxhkd &

bspc monitor -d I II III IV V VI VII VIII IX X

bspc config border_width         4.5
# bspc config window_gap          35
bspc config window_gap          55
# bspc config window_gap          10

bspc config split_ratio          0.52
bspc config borderless_monocle   false
bspc config gapless_monocle      true
bspc config focus_follows_pointer true

bspc rule -a Screenkey manage=off
bspc rule -a Zathura state=tiled
bspc rule -a Gimp state=floating follow=on
bspc rule -a Nm-connection-editor state=floating
bspc rule -a Emacs state=tiled
bspc rule -a Peek state=floating follow=on

bspc config focused_border_color "#928374"
bspc config normal_border_color "#504945"

# -----------------------------------------------------
# ------------------- Miscellaneous -------------------
# -----------------------------------------------------

YADM_CLASS=$(yadm config local.class)
if [ $YADM_CLASS = "Laptop" ]; then
    pulseaudio --start
	autorandr --change
fi

# -----------------------------------------------------
# ------------------- Autostart apps ------------------
# -----------------------------------------------------

~/bin/polybar-launch.sh &
xrdb ~/.Xresources &
feh --bg-scale ~/.dotfiles/wallpapers/monocolor.png
mopidy &
picom &
redshift &

# tray icons
xfce4-power-manager &
udiskie --tray &
nm-applet &
flameshot &
# flameshot config --showhelp false --maincolor '#83a598' --contrastcolor '#458588' --trayicon true
blueman-applet &
syncthing-gtk -m &

# -----------------------------------------------------
# ------------------- Miscellaneous Settings ----------
# -----------------------------------------------------
if [ $YADM_CLASS = "Laptop" ]; then
    # set touchpad options
    xinput set-prop "SYNA2B31:00 06CB:CD3E Touchpad" "libinput Tapping Enabled" 1
    xinput set-prop "SYNA2B31:00 06CB:CD3E Touchpad" "libinput Natural Scrolling Enabled" 1
    xinput set-prop "SYNA2B31:00 06CB:CD3E Touchpad" "libinput Disable While Typing Enabled" 0
    # allow two finger click
    xinput set-prop "SYNA2B31:00 06CB:CD3E Touchpad" "libinput Click Method Enabled" 0 1
    # allow two finger right click and middle click emulation
    xinput set-prop "SYNA2B31:00 06CB:CD3E Touchpad" "libinput Middle Emulation Enabled" 1
fi

xset r rate 500 50

# start keymappings
setxkbmap -option ctrl:nocaps

# Change from ugly 'X' cursor when hovering over background
xsetroot -cursor_name left_ptr
